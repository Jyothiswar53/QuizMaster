<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Quiz Result</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <style>
        .result-container {
            max-width: 900px;
            padding: 40px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(6, 6, 6, 0.6);
            text-align: center;
            margin: 50px auto;
        }

        .result-container h1 {
            color: #4A90E2;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .score-box {
            background-color: #F0F8FF;
            border: 2px solid #4A90E2;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }

        .score-text {
            font-size: 3em;
            font-weight: bold;
            color: #50E3C2;
            display: block;
            margin: 10px 0;
        }

        .score-text small {
            font-size: 0.5em;
            color: #555;
            font-weight: normal;
        }

        .result-item {
            font-size: 1.1em;
            margin: 10px 0;
            color: #333;
        }

        .result-item strong {
            color: #4A90E2;
        }

        .question-review {
            text-align: left;
            margin-top: 30px;
        }

        .question-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .options {
            margin-left: 20px;
        }

        .option {
            margin: 5px 0;
        }

        .correct {
            color: green;
            font-weight: bold;
        }

        .wrong {
            color: red;
            font-weight: bold;
        }

        .user-answer {
            font-style: italic;
        }

        .buttons {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .buttons a {
            padding: 12px 20px;
            text-decoration: none;
            font-weight: bold;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .btn-leaderboard {
            background-color: #FF9F1C;
            color: white;
        }

        .btn-leaderboard:hover {
            background-color: #E68A00;
        }

        .btn-retake {
            background-color: #4A90E2;
            color: white;
        }

        .btn-retake:hover {
            background-color: #357ABD;
        }

        .btn-home {
            background-color: #ccc;
            color: #333;
        }

        .btn-home:hover {
            background-color: #bbb;
        }
        .result-border {
            border: 2px solid #4A90E2;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
    </style>
</head>

<body>
    <div class="result-container">
        <div class="result-border">
            <h1>Quiz Complete!</h1>

            <div th:if="${attempt != null}">
                <p><strong>User:</strong> <span th:text="${attempt.user.username}"></span></p>
                <p><strong>Difficulty:</strong> <span th:text="${attempt.difficulty}"></span></p>
                <p><strong>Date Taken:</strong> <span
                        th:text="${#temporals.format(attempt.dateTaken, 'dd MMM yyyy, HH:mm')}"></span></p>

                <h2>Final Score: <span th:text="${attempt.score}" style="color:green;"></span> /
                    <span th:text="${attempt.totalQuestions}"></span>
                </h2>
            </div>
        </div>

        <div th:if="${questionAttempts != null}" class="question-review">
            <h2>Question Review</h2>
            <div th:each="qa : ${questionAttempts}" class="question-item">
                <p><strong th:text="'Q: ' + ${qa.questionText}"></strong></p>
                <div class="options">
                    <p class="option" th:classappend="${qa.option1 == qa.correctAnswer} ? 'correct' : ''"
                        th:text="'A) ' + ${qa.option1}"></p>
                    <p class="option" th:classappend="${qa.option2 == qa.correctAnswer} ? 'correct' : ''"
                        th:text="'B) ' + ${qa.option2}"></p>
                    <p class="option" th:classappend="${qa.option3 == qa.correctAnswer} ? 'correct' : ''"
                        th:text="'C) ' + ${qa.option3}"></p>
                    <p class="option" th:classappend="${qa.option4 == qa.correctAnswer} ? 'correct' : ''"
                        th:text="'D) ' + ${qa.option4}"></p>
                </div>

                <p><strong>Your Answer:</strong>
                    <span class="user-answer" th:classappend="${qa.correct} ? 'correct' : 'wrong'"
                        th:text="${qa.userAnswer}"></span>
                </p>
                <p><strong>Correct Answer:</strong>
                    <span class="correct" th:text="${qa.correctAnswer}"></span>
                </p>
            </div>
        </div>

        <div class="buttons" style="margin-top: 30px;">
            <a th:href="@{/leaderboard(difficulty=${attempt?.difficulty})}" class="btn-leaderboard">üèÜ View
                Leaderboard</a>
            <a th:href="@{/quiz(difficulty=${attempt?.difficulty})}" class="btn-retake">üîÑ Retake Quiz</a>
            <a th:href="@{/}" class="btn-home">üè† Home</a>
        </div>
    </div>
</body>

</html>
